var Revive=function(t){var r={},c=t,s={};this.clear=function(){return r={},this},this.setBroker=function(t){return c=t,this},this.emit=function(t,e,r){return c.publish({channel:t,topic:e,data:r}),this},this.apply=function(t,e,r){var i=c.subscribe({channel:t,topic:e,callback:function(t,e){r(t,e)}}),n=t+"."+e,a=s[n];return a||(a=[]),a.push(i),s[n]=a,this},this.unapply=function(t,e){try{var r=t+"."+e,i=s[r];if(i)for(var n=0;n<i.length;n++)i[n].unsubscribe();s[r]=[]}catch(t){}return this},this.on=function(t,e,r){var i=$("#"+t);return i.on(e,function(t){"click"===e&&i.attr("disabled")||r(t),t.preventDefault()}),this},this.asState=function(t){var e={},r=$("#"+t);return e.html=r.html(),e.text=r.text(),e.css=r.attr("style"),e.class=r.attr("class"),e.id=t,e.disabled=r.attr("disabled"),e.src=r.attr("src"),e.href=r.attr("href"),e.width=r.attr("width"),e.height=r.attr("height"),e.alt=r.attr("alt"),e.title=r.attr("title"),e.checked=r.attr("checked"),e.selected=r.attr("selected"),e},this.store=function(t,e){return r[t]=e,this},this.restoreAll=function(t){var e=r[t];try{e.forEach(function(t){i(t)})}catch(t){}return this},this.restore=function(t){var e=r[t];return i(e),this};var i=function(t){var e=t.id;t.html?n(e,t.html):t.text&&a(e,t.text),t.css&&h(e,t.css),l(e,"class",t.class),l(e,"src",t.src),l(e,"href",t.href),l(e,"width",t.width),l(e,"height",t.height),l(e,"alt",t.alt),l(e,"title",t.title),l(e,"disabled",t.disabled),l(e,"checked",t.checked),l(e,"selected",t.selected)},n=function(t,e){$("#"+t).html(e)},a=function(t,e){$("#"+t).text(e)},h=function(t,e){$("#"+t).css(e)},l=function(t,e,r){var i=$("#"+t);r?i.attr(e,r):i.removeAttr(e)}};revive=new Revive(this.postal),function(){var t=document.querySelectorAll("[revive-data]");if(t)for(var e=0;e<t.length;e++){var r=t[e].getAttribute("revive-data"),i=t[e].getAttribute("revive-fn"),n=t[e].getAttribute("id"),a=t[e].getAttribute("revive-type");if(i)revive.on(n,a,function(t){var e=window[i];"function"==typeof e&&(e(t,r),t.preventDefault())});else{var c=JSON.parse(r);revive.on(n,a,function(t){revive.emit(c.channel,c.topic,c.data)})}}}();
